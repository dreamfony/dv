<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
    <title>vm - DV</title>
    <meta name="description" content="My Stylish Documentation">
    <meta name="author" content="I, Me & Myself">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <link rel="icon" href="../themes/daux/img/favicon-blue.png" type="image/x-icon">

    <!-- Mobile -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Font -->
    
    <!-- CSS -->
    <link href='../themes/daux/css/theme-blue.min.css' rel='stylesheet' type='text/css'><link href='../themes/daux/css/mermaid.css' rel='stylesheet' type='text/css'>
            <!-- Tipue Search -->
        <link href="../tipuesearch/tipuesearch.css" rel="stylesheet">
    
    <!--[if lt IE 9]>
    <script src="../themes/daux/js/html5shiv-3.7.3.min.js"></script>
    <![endif]-->
</head>
<body class=" ">
    <div class="Columns content">
    <aside class="Columns__left Collapsible">
        <button type="button" class="Button Collapsible__trigger">
            <span class="Collapsible__trigger__bar"></span>
            <span class="Collapsible__trigger__bar"></span>
            <span class="Collapsible__trigger__bar"></span>
        </button>

        <a class="Brand" href="../index.html">DV</a>

    <div class="Search">
        <svg class="Search__icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 451 451">
            <path d="M447.05 428l-109.6-109.6c29.4-33.8 47.2-77.9 47.2-126.1C384.65 86.2 298.35 0 192.35 0 86.25 0 .05 86.3.05 192.3s86.3 192.3 192.3 192.3c48.2 0 92.3-17.8 126.1-47.2L428.05 447c2.6 2.6 6.1 4 9.5 4s6.9-1.3 9.5-4c5.2-5.2 5.2-13.8 0-19zM26.95 192.3c0-91.2 74.2-165.3 165.3-165.3 91.2 0 165.3 74.2 165.3 165.3s-74.1 165.4-165.3 165.4c-91.1 0-165.3-74.2-165.3-165.4z"/>
        </svg>
        <input type="search" id="tipue_search_input" class="Search__field" placeholder="Search..." autocomplete="on"
               results=25 autosave=text_search>
    </div>

        <div class="Collapsible__content">
            <!-- Navigation -->
            <ul class='Nav'><li class='Nav__item  has-children'><a href="#" class="aj-nav folder"><i class="Nav__arrow">&nbsp;</i>Processes</a><ul class='Nav'><li class='Nav__item '><a href="../Processes/Contribute_code.html">Contribute code</a></li><li class='Nav__item '><a href="../Processes/Install_project.html">Install project</a></li><li class='Nav__item '><a href="../Processes/Workflow.html">Workflow</a></li></ul></li><li class='Nav__item Nav__item--open has-children'><a href="#" class="aj-nav folder"><i class="Nav__arrow">&nbsp;</i>Install</a><ul class='Nav'><li class='Nav__item '><a href="../Install/linux.html">linux</a></li><li class='Nav__item Nav__item--active'><a href="../Install/vm.html">vm</a></li></ul></li><li class='Nav__item  has-children'><a href="#" class="aj-nav folder"><i class="Nav__arrow">&nbsp;</i>Architecture</a><ul class='Nav'><li class='Nav__item '><a href="../Architecture/activity_comment.html">activity comment</a></li><li class='Nav__item '><a href="../Architecture/activity_delivery_error_message.html">activity delivery error message</a></li><li class='Nav__item '><a href="../Architecture/answer_comment.html">answer comment</a></li><li class='Nav__item '><a href="../Architecture/content.html">content</a></li><li class='Nav__item '><a href="../Architecture/default_comment.html">default comment</a></li><li class='Nav__item '><a href="../Architecture/documentation.html">documentation</a></li><li class='Nav__item '><a href="../Architecture/geoarea.html">geoarea</a></li><li class='Nav__item '><a href="../Architecture/log_comment.html">log comment</a></li><li class='Nav__item '><a href="../Architecture/mailing_list.html">mailing list</a></li><li class='Nav__item '><a href="../Architecture/mailing_list_activity.html">mailing list activity</a></li><li class='Nav__item '><a href="../Architecture/mailing_list_needs_approval_message.html">mailing list needs approval message</a></li><li class='Nav__item '><a href="../Architecture/mailing_list_recipients.html">mailing list recipients</a></li><li class='Nav__item '><a href="../Architecture/moderation.html">moderation</a></li><li class='Nav__item '><a href="../Architecture/moderation_activity.html">moderation activity</a></li><li class='Nav__item '><a href="../Architecture/organisations.html">organisations</a></li><li class='Nav__item '><a href="../Architecture/positions.html">positions</a></li><li class='Nav__item '><a href="../Architecture/question_message.html">question message</a></li><li class='Nav__item '><a href="../Architecture/recieving_emails.html">recieving emails</a></li><li class='Nav__item '><a href="../Architecture/sending_emails.html">sending emails</a></li><li class='Nav__item '><a href="../Architecture/user.html">user</a></li></ul></li><li class='Nav__item '><a href="../architecture.html">architecture</a></li><li class='Nav__item '><a href="../features.html">features</a></li><li class='Nav__item '><a href="../issue_template.html">issue template</a></li><li class='Nav__item '><a href="../story_workflow.html">story workflow</a></li><li class='Nav__item '><a href="../tools.html">tools</a></li></ul>

            <div class="Links">
                            </div>

                                <div class="CodeToggler">
                        <hr/>
                                                    <label class="Checkbox">Show Code Blocks                                <input type="checkbox" class="CodeToggler__button--main" checked="checked"/>
                                <div class="Checkbox__indicator"></div>
                            </label>
                                            </div>
                
                
                        </div>
    </aside>
    <div class="Columns__right Columns__right--full">
        <div class="Columns__right__content">
            <div class="doc_content">
                <article class="Page">

    <div class="Page__header">
        <h1><a href="../Install/linux.html">Install</a> <svg class="Page__header--separator" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 477.175 477.175"><path d="M360.73 229.075l-225.1-225.1c-5.3-5.3-13.8-5.3-19.1 0s-5.3 13.8 0 19.1l215.5 215.5-215.5 215.5c-5.3 5.3-5.3 13.8 0 19.1 2.6 2.6 6.1 4 9.5 4 3.4 0 6.9-1.3 9.5-4l225.1-225.1c5.3-5.2 5.3-13.8.1-19z"/></svg> <a href="../Install/vm.html">vm</a></h1>
                    </div>

    <div class="s-content">
        <h1 id="page_VM-installation-instructions">VM installation instructions</h1>
<h4 id="page_System-requirements">System requirements</h4>
<p>Make sure you have the latest versions of packages</p>
<ul>
<li>Git
<ul>
<li>git flow</li>
</ul>
</li>
<li>Composer</li>
<li>PHP 5.6+</li>
<li>If you are on Ubuntu you will also need additional php packages
<ul>
<li>sudo apt-get install php-xml</li>
<li>sudo apt-get install php7.0-mbstring</li>
<li>sudo apt-get install php-curl</li>
</ul>
</li>
<li>Vagrant (comes with virtualbox / ansible)</li>
<li>nodejs (for patternLab; it should install gulp / bower etc)</li>
</ul>
<h4 id="page_First-Time-Installation">First Time Installation</h4>
<p>@todo: update this with instructions when forking repos and making pull requests)</p>
<ul>
<li>
<p>sudo apt-get install php7.0-bz2</p>
</li>
<li>
<p>git clone https://github.com/dreamfony/dv.git</p>
</li>
<li>
<p>cd dv</p>
</li>
<li>
<p>git checkout develop</p>
</li>
<li>
<p>obtain dv_secure module directory from stakholders and put it in proper place /dv/docroot/profiles/dv/modules/dv_features/dv_secure (* we should make this more automatic)</p>
</li>
<li>
<p>composer install</p>
</li>
<li>
<p>vagrant up</p>
</li>
<li>
<p>vagrant ssh</p>
</li>
<li>
<p>cd /var/www/dv</p>
</li>
<li>
<p>composer blt-alias</p>
</li>
<li>
<p>(restart ssh terminal: exit / vagrant ssh)</p>
</li>
<li>
<p>go to /var/www/dv/blt/project.local.yml and add environment: 'local'</p>
</li>
<li>
<p>cd /var/www/dv</p>
</li>
<li>
<p>blt setup</p>
</li>
<li>
<p>cd docroot</p>
</li>
<li>
<p>drupal init</p>
</li>
<li>
<p>to install alias for blt on local machine, run &quot;sudo composer run-script blt-alias&quot;</p>
</li>
<li>
<p>blt custom:import-content</p>
</li>
</ul>
<h3 id="page_Vagrant">Vagrant</h3>
<p><em>VM on Windows</em></p>
<p>https://www.jeffgeerling.com/blog/2017/drupal-vm-on-windows-fast-container-blt-project-development</p>
<p>Install the Vagrant::Hostsupdater plugin with
<code>vagrant plugin install vagrant-hostsupdater</code>
which will manage the hostâ€™s /etc/hosts file by adding and removing hostname entries for you</p>
<pre><code>vagrant plugin install vagrant-cachier
vagrant plugin install vagrant-vbguest
</code></pre>
<p>On windows you have to do multiple things to make NFS sharing work</p>
<pre><code>1. vagrant plugin install vagrant-winnfsd

2. COPY EXAMPLE FILES from custom folder
local.config.yml
Vagrantfile.local

3. Download and run WinNFSd.exe C:\DV
4. Delete node_modules folder to make it speedier
5. Sometimes also settings.php needs to be chmod ed

It works with thoose 4 steps, no single article online is correct
But some info and code parts can be found at:
https://hollyit.net/blog/windowsvagrantwinnfsd-without-file-update-problems
http://docs.drupalvm.com/en/latest/other/performance/#improving-performance-on-windows
</code></pre>
<p>after that you will have to destroy machine and provision it again</p>
<pre><code>vagrant destroy
vagrant up
</code></pre>
<p>{{BUG}}
On MAC we had to change VirtualBox Machine network setting: Adapter1 / NAT / Cable connect</p>
<p>BLT uses <a href="https://www.drupalvm.com/" class="Link--external">DrupalVM</a>
Configuration file can be found at <code>/box/config.yml</code>
For local overrides use local.config.yml</p>
<p>DrupalVM configuration file settings are used in both vagrantfile and ansible playbook.yml
Thats why sometimes it is necessary to re provision machine depending on what settings you change inside file.
DrupalVM Configuration is merged:</p>
<ul>
<li>config.yml</li>
<li>local.config.yml
The merge of the variables in these two files is shallow, so if you want to override a single item in a list, you will need to re-define all items in that list.</li>
</ul>
<p><strong>commands</strong></p>
<pre><code>vagrant up
vagrant halt
vagrant reload

vagrant login
#share http
vagrant share
#share ssh
vagrant share â€“ssh
</code></pre>
    </div>

        <nav>
        <ul class="Pager">
            <li class=Pager--prev><a href="../Install/linux.html">Previous</a></li>            <li class=Pager--next><a href="../Architecture/activity_comment.html">Next</a></li>        </ul>
    </nav>
    </article>

            </div>
        </div>
    </div>
</div>

    
    <!-- JS -->
    <script src="../themes/daux/js/jquery-1.11.3.min.js"></script><script src="../themes/daux/js/highlight.pack.js"></script><script src="../themes/daux/js/daux.js"></script><script src="https://unpkg.com/mermaid@8.0.0-rc.6/dist/mermaid.js"></script><script src="../themes/daux/js/markdown_source.js"></script>
            <!-- Tipue Search -->
        <script type="text/javascript" src="../tipuesearch/tipuesearch.js"></script>

        <script>
            window.onunload = function(){}; // force $(document).ready to be called on back/forward navigation in firefox
            $(function() {
                tipuesearch({
                    'base_url': '../'
                });
            });
        </script>
    
</body>
</html>
